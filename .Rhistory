analysis_data <- readRDS(here("processed data", "analysis_data.RDS"))
analysis_data
ggplot(analysis_data, aes(x=n_sentences_feed)) +
geom_histogram(aes(y = after_stat(count / sum(count))), binwidth=1, fill="#FF8C42") +
theme_minimal() +
xlab("Sentences") +
ylab("Proportion") +
scale_x_continuous(expand = c(0,0), limits = c(0,55)) +
scale_y_continuous(expand = c(0,0)) +
theme(text=element_text(family="LMRoman", color = "black", size = 24), plot.caption = element_text(hjust = 0), axis.text = element_text(color = "black", size = 24)) +
geom_vline(xintercept = median(analysis_data$n_sentences_feed), linetype = "dashed", color = "black")
ggplot(analysis_data, aes(x=n_sentences_ref)) +
geom_histogram(aes(y = after_stat(count / sum(count))), binwidth=1, fill="#1F4E79") +
theme_minimal() +
xlab("Sentences") +
ylab("Proportion") +
scale_x_continuous(expand = c(0,0), limits = c(0,55)) +
scale_y_continuous(expand = c(0,0)) +
theme(text=element_text(family="LMRoman", color = "black", size = 24), plot.caption = element_text(hjust = 0), axis.text = element_text(color = "black", size = 24)) +
geom_vline(xintercept = median(analysis_data$n_sentences_ref, na.rm=T), linetype = "dashed", color = "black")
plot_data <- analysis_data %>%
mutate(feedback_score = rowMeans(across(c("specific_examples_feed", "next_steps_feed", "strengths_mentioned_feed", "areas_for_growth_feed")), na.rm = TRUE))
# Calculate overall means
overall_means <- plot_data %>%
summarize(across(c("specific_examples_feed", "next_steps_feed", "strengths_mentioned_feed", "areas_for_growth_feed"),
~mean(.x, na.rm = TRUE), .names = "overall_{.col}"))
pst_means <- plot_data %>%
group_by(pst_id) %>%
summarize(across(c("specific_examples_feed", "next_steps_feed", "strengths_mentioned_feed", "areas_for_growth_feed"),
~as.numeric(any(.x == 1, na.rm = TRUE)))) %>%
summarize(across(-pst_id, ~mean(.x, na.rm = TRUE), .names = "pst_{.col}"))
pst_means
1-0.668
plot_data_1 <- analysis_data %>%
group_by(area_for_improvement_feed) %>%
summarize(n=n()) %>%
arrange(-n) %>%
ungroup %>%
mutate(pct=n/sum(n)) %>%
rename(skill=area_for_improvement_feed) %>%
mutate(type = "Supervisor Feedback")
# Data preparation for PST reflection
plot_data_2 <- analysis_data %>%
group_by(area_for_improvement_ref) %>%
summarize(n=n()) %>%
arrange(-n) %>%
ungroup %>%
mutate(pct=n/sum(n)) %>%
rename(skill=area_for_improvement_ref) %>%
mutate(type = "PST Reflection")
plot_data_1
#ReadMe----
#Purpose: Generating tables for analysis
#Author: Andrew Avitabile
#General----
#Load packages
pacman::p_load(conflicted, here, tidyverse, fixest, modelsummary, tinytable, car, gtheory)
# Remove everything
rm(list=ls())
# Set output filepath - YOU'LL NEED TO UPDATE THIS
output_path <- "C:/Users/Andre/Dropbox/Apps/Overleaf/PST Feedback Text Analysis/figures_and_tables"
# Conflict prefer
conflict_prefer(name = "filter", winner = "dplyr")
# Outcome mean function
glance_custom.fixest <- function(x, ...) {
out <- data.frame("Mean(DV)" = as.numeric(fitstat(x, type = "my")))
return(out)
}
# Replace X with checkmark
replace_x_with_checkmark <- function(text) {
gsub("X", "$\\checkmark$", text, fixed = TRUE)
}
# Renaming goodness-of-fit statistics
gm <- tibble::tribble(
~raw,                ~clean,          ~fmt,
"nobs",               "\\midrule N",             0,
"r.squared",          "$R^2$",         3,
"Mean.DV.",           "Outcome Mean",  3,
"FE: programcohort",  "Program $\\times$ cohort FE", 0,
"FE: supervisor_id",  "Supervisor FE", 0,
"FE: pst_id",  "PST FE", 0,
"FE: observation_order", "Order FE", 0,
"FE: cohort_cl", "Cohort FE", 0)
# Renaming goodness-of-fit statistics (bivariate models)
gm_bi <- tibble::tribble(
~raw,                ~clean,          ~fmt,
"nobs",               "N",             0,
"r.squared",          "$R^2$",         3,
"FE: programcohort",  "Program $\\times$ cohort FE", 0,
"FE: supervisor_id",  "Supervisor FE", 0,
"FE: pst_id",  "PST FE", 0,
"FE: observation_order", "Order FE", 0,
"FE: cohort", "Cohort FE", 0,
"FE: st_school_id", "Placement School FE", 0)
#Load data
analysis_data <- readRDS(here("processed data", "analysis_data.RDS"))
qual_coding <- read_dta("C/Users/Andre/Dropbox/Andrew and Brendan Shared Folder/PST Feedback Text/data/qual coding/Refl_CTO_response_analysis_07082024.dta") %>%
filter(!(nocriticism == 1 & (lessoncycle == 1 | lessonconnections == 1 | studentcomprehension == 1 | lessondelivery == 1 | praise == 1 | transitions == 1 | attention == 1 | nonverbaltechniques == 1 | corrections == 1)))
library(haven)
qual_coding <- read_dta("C/Users/Andre/Dropbox/Andrew and Brendan Shared Folder/PST Feedback Text/data/qual coding/Refl_CTO_response_analysis_07082024.dta") %>%
filter(!(nocriticism == 1 & (lessoncycle == 1 | lessonconnections == 1 | studentcomprehension == 1 | lessondelivery == 1 | praise == 1 | transitions == 1 | attention == 1 | nonverbaltechniques == 1 | corrections == 1)))
qual_coding <- read_dta("C:/Users/Andre/Dropbox/Andrew and Brendan Shared Folder/PST Feedback Text/data/qual coding/Refl_CTO_response_analysis_07082024.dta") %>%
filter(!(nocriticism == 1 & (lessoncycle == 1 | lessonconnections == 1 | studentcomprehension == 1 | lessondelivery == 1 | praise == 1 | transitions == 1 | attention == 1 | nonverbaltechniques == 1 | corrections == 1)))
#Combine data sources----
qual_coding_lim <- select(qual_coding, observationid, crm, Codes1,
nocriticism, AcademicsCategory, BehaviorsCategory, lessoncycle,
lessonconnections, studentcomprehension, lessondelivery, praise, transitions,
attention, nonverbaltechniques, corrections) %>%
rowwise() %>%
mutate(afi_1_qual = ifelse(sum(BehaviorsCategory, transitions, nonverbaltechniques)>0, 1, 0), #Classroom management
afi_2_qual = ifelse(sum(lessondelivery, attention)>0, 1, 0),  #Student engagement
afi_3_qual = ifelse(sum(lessonconnections, lessoncycle)>0, 1, 0),  #Lesson Planning
afi_4_qual = sum(praise),  #Communication
afi_5_qual = sum(corrections, studentcomprehension),  #Assessment and feedback
afi_9_qual = sum(nocriticism)) #None
matched_data <- inner_join(analysis_data, qual_coding_lim)
#Regressions----
model1 <- feols(afi_1 ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
#Regressions----
model1 <- feols(afi_feed_1 ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model1 <- feols(afi_1_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model2 <- feols(afi_2_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model3 <- feols(afi_3_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model4 <- feols(afi_4_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model5 <- feols(afi_5_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model6 <- feols(afi_6_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model7 <- feols(afi_7_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model8 <- feols(afi_8_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model9 <- feols(afi_9_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
models <- list(model9, model1, model2, model3, model4, model5, model6, model7)
etable(models)
model1 <- feols(afi_1_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model2 <- feols(afi_2_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model3 <- feols(afi_3_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model4 <- feols(afi_4_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model5 <- feols(afi_5_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model6 <- feols(afi_6_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model7 <- feols(afi_7_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model8 <- feols(afi_8_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
model9 <- feols(afi_9_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero")
models <- list(model9, model1, model2, model3, model4, model5, model6, model7)
etable(models)
#Regressions----
model1 <- feglm(afi_1_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model2 <- feglm(afi_2_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model3 <- feglm(afi_3_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model4 <- feglm(afi_4_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model5 <- feglm(afi_5_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model6 <- feglm(afi_6_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model7 <- feglm(afi_7_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model8 <- feglm(afi_8_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model9 <- feglm(afi_9_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
models <- list(model9, model1, model2, model3, model4, model5, model6, model7)
modelsummary(models, stars=T, exponentiate = T)
models <- list(model9, model1, model2, model3, model4, model5, model6, model7)
etable(models)
modelsummary(models, stars=T, exponentiate = T)
names(analysis_data)
#Predicting evaluation score----
model1 <- feols(avg_eval_score_std ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model2 <- feols(avg_eval_score_std ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | pst_id + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model3 <- feols(avg_eval_score_std ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | supervisor_id + programcohort + observation_order, data = rename(select(analysis_data,-area_for_improvement_feed),area_for_improvement_feed=area_for_improvement_ref), cluster = "pst_id", weights = ~inv_n_obs)
model4 <- feols(avg_eval_score_std ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | pst_id + observation_order, data = rename(select(analysis_data,-area_for_improvement_feed),area_for_improvement_feed=area_for_improvement_ref), cluster = "pst_id", weights = ~inv_n_obs)
# Create combined regression table
models <- list(model1,model2,model3,model4)
etable(models)
#Predicting evaluation score----
model1 <- feols(avg_eval_score_std ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model2 <- feols(avg_eval_score_std ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | pst_id + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model3 <- feols(avg_eval_score_std ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | supervisor_id + programcohort + observation_order, data = rename(select(analysis_data,-area_for_improvement_feed),area_for_improvement_feed=area_for_improvement_ref), cluster = "pst_id", weights = ~inv_n_obs)
model4 <- feols(avg_eval_score_std ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | pst_id + observation_order, data = rename(select(analysis_data,-area_for_improvement_feed),area_for_improvement_feed=area_for_improvement_ref), cluster = "pst_id", weights = ~inv_n_obs)
# Create combined regression table
models <- list(model1,model2,model3,model4)
etable(models)
model1 <- feols(examscore_std_ppr ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model2 <- feols(examscore_std_req ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model3 <- feols(ever_enter_teaching ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model4 <- feols(enter_teaching_imm ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model5 <- feols(same_school ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model6 <- feols(advantage_index ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
# Create combined regression table
models <- list(model1,model2,model3,model4,model5,model6)
etable(models)
etable(models)
etable(models)
analysis_data %>%
group_by(pst_id) %>%
summarize(classroom_management_mentioned_feed=sum(classroom_management_mentioned_feed)) %>%
ungroup() %>%
summarize(classroom_management_mentioned_feed=sum(classroom_management_mentioned_feed), n=n()) %>%
mutate(pct=classroom_management_mentioned_feed/n)
analysis_data %>%
group_by(pst_id) %>%
summarize(lesson_planning_mentioned_feed=sum(lesson_planning_mentioned_feed)) %>%
ungroup() %>%
summarize(lesson_planning_mentioned_feed=sum(lesson_planning_mentioned_feed), n=n()) %>%
mutate(pct=lesson_planning_mentioned_feed/n)
analysis_data %>%
group_by(pst_id) %>%
summarize(differentiation_mentioned_feed=sum(differentiation_mentioned_feed)) %>%
ungroup() %>%
summarize(differentiation_mentioned_feed=sum(differentiation_mentioned_feed), n=n()) %>%
mutate(pct=differentiation_mentioned_feed/n)
test <- filter(analysis_data, area_for_improvement_feed=="None" & classroom_management_mentioned_feed==1)
test <- filter(analysis_data, area_for_improvement_feed=="None" & lesson_planning_mentioned_feed==1)
View(test)
model1 <- feols(examscore_std_ppr ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model2 <- feols(examscore_std_req ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model3 <- feols(ever_enter_teaching ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model4 <- feols(enter_teaching_imm ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model5 <- feols(same_school ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + faminc + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
model6 <- feols(advantage_index ~ classroom_management_mentioned_feed + lesson_planning_mentioned_feed + differentiation_mentioned_feed + assessment_feedback_mentioned_feed + student_engagement_mentioned_feed + student_comprehension_mentioned_feed + communication_mentioned_feed | sat_score_cat + gpa_z_cat + race + sex + mother_colldeg + father_colldeg + supervisor_id + programcohort + observation_order, data = analysis_data, cluster = "pst_id", weights = ~inv_n_obs)
# Create combined regression table
models <- list(model1,model2,model3,model4,model5,model6)
etable(models)
# Renaming coefficients
cm <- c(
"nocriticism" = "\\hspace{1mm} No criticism",
"praise" = "\\hspace{3mm} Praise",
"transitions" = "\\hspace{3mm} Transitions",
"attention" = "\\hspace{3mm} Attention",
"nonverbaltechniques" = "\\hspace{3mm} Non-verbal Techniques",
"corrections" = "\\hspace{3mm} Corrections",
"lessoncycle" = "\\hspace{3mm} Lesson Cycle",
"lessonconnections" = "\\hspace{3mm} Lesson Connections",
"studentcomprehension" = "\\hspace{3mm} Student Comprehension",
"lessondelivery" = "\\hspace{3mm} Lesson Delivery"
)
# Use model summary to create a nice table
table <- modelsummary(models = models,
stars = c('*' = .05, '**' = .01, '***' = .001),
coef_map = cm,
gof_omit = 'DF|Deviance|AIC|BIC|RMSE|Std.Errors',
gof_map = gm) %>%
group_tt(i = list("\\textbf{Monitoring Student Behavior}" = 3, "\\textbf{Instructional Development}" = 13)) %>%
save_tt("latex")
#Regressions----
model1 <- feglm(afi_1_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model2 <- feglm(afi_2_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model3 <- feglm(afi_3_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model4 <- feglm(afi_4_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model5 <- feglm(afi_5_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model6 <- feglm(afi_6_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model7 <- feglm(afi_7_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model8 <- feglm(afi_8_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model9 <- feglm(afi_9_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
models <- list(model9, model1, model2, model3, model4, model5, model6, model7)
etable(models)
# Renaming coefficients
cm <- c(
"nocriticism" = "\\hspace{1mm} No criticism",
"praise" = "\\hspace{3mm} Praise",
"transitions" = "\\hspace{3mm} Transitions",
"attention" = "\\hspace{3mm} Attention",
"nonverbaltechniques" = "\\hspace{3mm} Non-verbal Techniques",
"corrections" = "\\hspace{3mm} Corrections",
"lessoncycle" = "\\hspace{3mm} Lesson Cycle",
"lessonconnections" = "\\hspace{3mm} Lesson Connections",
"studentcomprehension" = "\\hspace{3mm} Student Comprehension",
"lessondelivery" = "\\hspace{3mm} Lesson Delivery"
)
# Use model summary to create a nice table
table <- modelsummary(models = models,
stars = c('*' = .05, '**' = .01, '***' = .001),
coef_map = cm,
gof_omit = 'DF|Deviance|AIC|BIC|RMSE|Std.Errors',
gof_map = gm) %>%
group_tt(i = list("\\textbf{Monitoring Student Behavior}" = 3, "\\textbf{Instructional Development}" = 13)) %>%
save_tt("latex")
table <- sub("(?s).*?\\\\midrule(.*?)\\\\bottomrule.*", "\\1", table, perl = TRUE)
# Save to LaTeX
writeLines(table, "C:/Users/Andre/Dropbox/Apps/Overleaf/PST Feedback Text Analysis/figures_and_tables/Pred_LLM_w_Qual.tex")
gm_presentation <- tibble::tribble(
~raw,                ~clean,          ~fmt,
"nobs",               "\\midrule N",             0,
"Mean.DV.",           "Outcome Mean",  3,
"FE: programcohort",  "Program $\\times$ cohort FE", 0,
"FE: supervisor_id",  "Supervisor FE", 0,
"FE: uin",  "PST FE", 0,
"FE: observation_order", "Order FE", 0,
"FE: cohort_cl", "Cohort FE", 0)
# Use model summary to create a nice table
table <- modelsummary(models = models,
estimate="{estimate}{stars}",
statistic = NULL,
stars = c('*' = .05, '**' = .01, '***' = .001),
coef_map = cm,
gof_omit = 'DF|Deviance|AIC|BIC|RMSE|Std.Errors',
gof_map = gm_presentation) %>%
group_tt(i = list("\\textbg{Kwok et al. (2024) Coding}" = 1, "\\hspace{1mm} \\textit{Monitoring Student Behavior}" = 2, "\\hspace{1mm} \\textit{Instructional Development}" = 7)) %>%
save_tt("latex")
table <- sub("(?s).*?\\\\midrule(.*?)\\\\bottomrule.*", "\\1", table, perl = TRUE)
# Save to LaTeX
writeLines(table, "C:/Users/Andre/Dropbox/Apps/Overleaf/PST Feedback Text Analysis/figures_and_tables/Pred_LLM_w_Qual_no_se.tex")
# Use model summary to create a nice table
table <- modelsummary(models = models,
estimate="{estimate}{stars}",
exponentiate = T,
statistic = NULL,
stars = c('*' = .05, '**' = .01, '***' = .001),
coef_map = cm,
gof_omit = 'DF|Deviance|AIC|BIC|RMSE|Std.Errors',
gof_map = gm_presentation) %>%
group_tt(i = list("\\textbg{Kwok et al. (2024) Coding}" = 1, "\\hspace{1mm} \\textit{Monitoring Student Behavior}" = 2, "\\hspace{1mm} \\textit{Instructional Development}" = 7)) %>%
save_tt("latex")
table <- sub("(?s).*?\\\\midrule(.*?)\\\\bottomrule.*", "\\1", table, perl = TRUE)
# Save to LaTeX
writeLines(table, "C:/Users/Andre/Dropbox/Apps/Overleaf/PST Feedback Text Analysis/figures_and_tables/Pred_LLM_w_Qual_no_se.tex")
models
# Use model summary to create a nice table
table <- modelsummary(models = models,
estimate="{estimate}{stars}",
exponentiate = T,
statistic = NULL,
stars = c('*' = .05, '**' = .01, '***' = .001),
coef_map = cm,
gof_omit = 'DF|Deviance|AIC|BIC|RMSE|Std.Errors',
gof_map = gm_presentation) %>%
group_tt(i = list("\\textbg{Kwok et al. (2024) Coding}" = 1, "\\hspace{1mm} \\textit{Monitoring Student Behavior}" = 2, "\\hspace{1mm} \\textit{Instructional Development}" = 7)) %>%
save_tt("latex")
table <- sub("(?s).*?\\\\midrule(.*?)\\\\bottomrule.*", "\\1", table, perl = TRUE)
# Save to LaTeX
writeLines(table, "C:/Users/Andre/Dropbox/Apps/Overleaf/PST Feedback Text Analysis/figures_and_tables/Pred_LLM_w_Qual_no_se.tex")
table
#Regressions----
model1 <- feglm(afi_1_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model2 <- feglm(afi_2_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model3 <- feglm(afi_3_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model4 <- feglm(afi_4_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model5 <- feglm(afi_5_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model6 <- feglm(afi_6_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model7 <- feglm(afi_7_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model8 <- feglm(afi_8_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model9 <- feglm(afi_9_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
models <- list(model9, model1, model2, model3, model4, model5, model6, model7)
etable(models)
# Renaming coefficients
cm <- c(
"nocriticism" = "\\hspace{1mm} No criticism",
"praise" = "\\hspace{3mm} Praise",
"transitions" = "\\hspace{3mm} Transitions",
"attention" = "\\hspace{3mm} Attention",
"nonverbaltechniques" = "\\hspace{3mm} Non-verbal Techniques",
"corrections" = "\\hspace{3mm} Corrections",
"lessoncycle" = "\\hspace{3mm} Lesson Cycle",
"lessonconnections" = "\\hspace{3mm} Lesson Connections",
"studentcomprehension" = "\\hspace{3mm} Student Comprehension",
"lessondelivery" = "\\hspace{3mm} Lesson Delivery"
)
# Use model summary to create a nice table
table <- modelsummary(models = models,
stars = c('*' = .05, '**' = .01, '***' = .001),
coef_map = cm,
exponentiate = T,
gof_omit = 'DF|Deviance|AIC|BIC|RMSE|Std.Errors',
gof_map = gm) %>%
group_tt(i = list("\\textbf{Monitoring Student Behavior}" = 3, "\\textbf{Instructional Development}" = 13)) %>%
save_tt("latex")
table <- sub("(?s).*?\\\\midrule(.*?)\\\\bottomrule.*", "\\1", table, perl = TRUE)
# Save to LaTeX
writeLines(table, "C:/Users/Andre/Dropbox/Apps/Overleaf/PST Feedback Text Analysis/figures_and_tables/Pred_LLM_w_Qual.tex")
#Regressions----
model1 <- feglm(afi_1_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model2 <- feglm(afi_2_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model3 <- feglm(afi_3_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model4 <- feglm(afi_4_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model5 <- feglm(afi_5_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model6 <- feglm(afi_6_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model7 <- feglm(afi_7_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model8 <- feglm(afi_8_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model9 <- feglm(afi_9_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
models <- list(model1, model2, model3, model4, model5, model6, model7, model9)
etable(models)
#Regressions----
model1 <- feglm(afi_1_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model2 <- feglm(afi_2_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model3 <- feglm(afi_3_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model4 <- feglm(afi_4_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model5 <- feglm(afi_5_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model6 <- feglm(afi_6_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model7 <- feglm(afi_7_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model8 <- feglm(afi_8_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model9 <- feglm(afi_9_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
models <- list(model1, model2, model3, model4, model5, model6, model7, model9)
etable(models)
# Renaming coefficients
cm <- c(
"nocriticism" = "\\hspace{1mm} No criticism",
"praise" = "\\hspace{3mm} Praise",
"transitions" = "\\hspace{3mm} Transitions",
"attention" = "\\hspace{3mm} Attention",
"nonverbaltechniques" = "\\hspace{3mm} Non-verbal Techniques",
"corrections" = "\\hspace{3mm} Corrections",
"lessoncycle" = "\\hspace{3mm} Lesson Cycle",
"lessonconnections" = "\\hspace{3mm} Lesson Connections",
"studentcomprehension" = "\\hspace{3mm} Student Comprehension",
"lessondelivery" = "\\hspace{3mm} Lesson Delivery"
)
# Use model summary to create a nice table
table <- modelsummary(models = models,
stars = c('*' = .05, '**' = .01, '***' = .001),
coef_map = cm,
exponentiate = T,
gof_omit = 'DF|Deviance|AIC|BIC|RMSE|Std.Errors',
gof_map = gm) %>%
group_tt(i = list("\\textbf{Monitoring Student Behavior}" = 3, "\\textbf{Instructional Development}" = 13)) %>%
save_tt("latex")
table <- sub("(?s).*?\\\\midrule(.*?)\\\\bottomrule.*", "\\1", table, perl = TRUE)
# Save to LaTeX
writeLines(table, "C:/Users/Andre/Dropbox/Apps/Overleaf/PST Feedback Text Analysis/figures_and_tables/Pred_LLM_w_Qual.tex")
model1 <- feglm(afi_1_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model2 <- feglm(afi_2_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model3 <- feglm(afi_3_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model4 <- feglm(afi_4_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model5 <- feglm(afi_5_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model6 <- feglm(afi_6_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model7 <- feglm(afi_7_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model8 <- feglm(afi_8_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model9 <- feglm(afi_9_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model10 <- feglm(afi_10_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
models <- list(model1, model2, model3, model4, model5, model6, model7, model10)
etable(models)
model1 <- feglm(afi_1_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model2 <- feglm(afi_2_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model3 <- feglm(afi_3_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model4 <- feglm(afi_4_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model5 <- feglm(afi_5_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model6 <- feglm(afi_6_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model7 <- feglm(afi_7_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model8 <- feglm(afi_8_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model9 <- feglm(afi_9_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
model10 <- feglm(afi_10_feed ~ nocriticism + lessoncycle + lessonconnections + studentcomprehension + lessondelivery + praise + transitions + attention + nonverbaltechniques + corrections, data = matched_data, vcov = "hetero", family = binomial(link = "logit"))
models <- list(model1, model2, model3, model4, model5, model6, model7, model10)
etable(models)
# Renaming coefficients
cm <- c(
"nocriticism" = "\\hspace{1mm} No criticism",
"praise" = "\\hspace{3mm} Praise",
"transitions" = "\\hspace{3mm} Transitions",
"attention" = "\\hspace{3mm} Attention",
"nonverbaltechniques" = "\\hspace{3mm} Non-verbal Techniques",
"corrections" = "\\hspace{3mm} Corrections",
"lessoncycle" = "\\hspace{3mm} Lesson Cycle",
"lessonconnections" = "\\hspace{3mm} Lesson Connections",
"studentcomprehension" = "\\hspace{3mm} Student Comprehension",
"lessondelivery" = "\\hspace{3mm} Lesson Delivery"
)
# Use model summary to create a nice table
table <- modelsummary(models = models,
stars = c('*' = .05, '**' = .01, '***' = .001),
coef_map = cm,
exponentiate = T,
gof_omit = 'DF|Deviance|AIC|BIC|RMSE|Std.Errors',
gof_map = gm) %>%
group_tt(i = list("\\textbf{Monitoring Student Behavior}" = 3, "\\textbf{Instructional Development}" = 13)) %>%
save_tt("latex")
table <- sub("(?s).*?\\\\midrule(.*?)\\\\bottomrule.*", "\\1", table, perl = TRUE)
# Save to LaTeX
writeLines(table, "C:/Users/Andre/Dropbox/Apps/Overleaf/PST Feedback Text Analysis/figures_and_tables/Pred_LLM_w_Qual.tex")
#ReadMe----
#Purpose: Generating plots for analysis
#Author: Andrew Avitabile
#General----
#Load packages
pacman::p_load(conflicted, here, tidyverse, showtext, scales)
# Remove everything
rm(list=ls())
# Conflict prefer
conflict_prefer(name = "filter", winner = "dplyr")
#Add fonts
font_add(family = "LMRoman", regular = here("lmroman10-regular.otf"))
showtext_auto()
# Set output filepath - YOU'LL NEED TO UPDATE THIS
output_path <- "C:/Users/Andre/Dropbox/Apps/Overleaf/PST Feedback Text Analysis/figures_and_tables"
#Load data
analysis_data <- readRDS(here("processed data", "analysis_data.RDS"))
#Plot area for improvement----
# Data preparation for supervisor feedback
plot_data_1 <- analysis_data %>%
group_by(area_for_improvement_feed) %>%
summarize(n=n()) %>%
arrange(-n) %>%
ungroup %>%
mutate(pct=n/sum(n)) %>%
rename(skill=area_for_improvement_feed) %>%
mutate(type = "Supervisor Feedback")
# Data preparation for PST reflection
plot_data_2 <- analysis_data %>%
group_by(area_for_improvement_ref) %>%
summarize(n=n()) %>%
arrange(-n) %>%
ungroup %>%
mutate(pct=n/sum(n)) %>%
rename(skill=area_for_improvement_ref) %>%
mutate(type = "PST Reflection")
# Combine and process the data
plot_data <- bind_rows(plot_data_1, plot_data_2) %>%
mutate(sd = pct*(1-pct),
se = sd/sqrt(n),
ci95_plus = pct+1.96*se,
ci95_minus = pct-1.96*se) %>%
mutate(skill=case_when(
skill=="none" ~ "No Area",
skill=="multiple" ~ "Multiple Areas",
skill=="other" ~ "Other Area",
TRUE ~ skill
)) %>%
# Ensure all skills appear in both types
complete(skill, type, fill = list(n = 0, pct = 0, sd = 0, se = 0, ci95_plus = 0, ci95_minus = 0)) %>%
mutate(type = factor(type, levels = c("Supervisor Feedback", "PST Reflection")))
plot_data_1
plot_data_2
